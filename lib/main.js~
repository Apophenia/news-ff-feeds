var widgets = require("sdk/widget");
var base64 = require("sdk/base64"); 
var Request = require("sdk/request").Request;
const { XMLHttpRequest } = require('sdk/net/xhr');

var username = "username";
var password = "pass";
var auth = base64.encode(username + ":" + password);

function getFeeds() {
    var request = new XMLHttpRequest();
    request.open("GET", "http://localhost/owncloud/index.php/apps/news/api/v1-2/feeds");
    //request.withCredentials = true;
    request.setRequestHeader("Content-Type", "application/json");
    //request.setRequestHeader("Authorization", "Basic " + auth);
    //   request.overrideMimeType("text/plain");
    request.onload = function()
    {
	console.log("Response received: " + request.responseText);
    };
    request.send(null);
}

var widget = widgets.Widget({
    id: "mozilla-link",
    label: "Mozilla website",
    contentURL: "http://www.mozilla.org/favicon.ico",
    onClick: function() {
	    getFeeds();
    }
});
